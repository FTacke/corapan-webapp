# CO.RA.PAN BlackLab Format Configuration - TSV (Tabular)
#
# This file defines how BlackLab should interpret the TSV export files
# created by blacklab_index_creation.py.
#
# USAGE:
#   IndexTool create /data/index/corapan exports/tsv/*.tsv corapan-tsv
#
# FORMAT: TSV with header row
#   Columns: word, norm, lemma, pos, past_type, future_type, tense, mood,
#            person, number, aspect, tokid, start_ms, end_ms, sentence_id,
#            utterance_id, speaker_code
#
# METADATA: Import from docmeta.jsonl
#   Configure in blacklab-server.yaml:
#     metadata:
#       documentFormat: jsonlines
#       path: exports/docmeta.jsonl

displayName: "CO.RA.PAN Corpus (TSV)"
description: "CO.RA.PAN Spanish Radio Transcripts with linguistic annotations"

fileType: tabular

fileTypeOptions:
  type: tsv
  columnNames: true

annotatedFields:
  contents:
    displayName: "Contents"
    description: "Main content field with token annotations"
    
    annotations:
      # ===== WORD FORMS =====
      - name: word
        displayName: "Word"
        description: "Original word form (case-sensitive)"
        valuePath: word
        sensitivity: sensitive
        uiType: "text"
      
      - name: norm
        displayName: "Normalized Form"
        description: "Case/accent-insensitive normalized form for searching"
        valuePath: norm
        sensitivity: insensitive
        uiType: "text"
      
      - name: lemma
        displayName: "Lemma"
        description: "Dictionary form"
        valuePath: lemma
        sensitivity: sensitive
        uiType: "lemma"
      
      # ===== PART-OF-SPEECH =====
      - name: pos
        displayName: "POS"
        description: "Part-of-speech tag (Universal Dependencies)"
        valuePath: pos
        uiType: "pos"
      
      # ===== LEGACY TENSE (for compatibility) =====
      - name: past_type
        displayName: "Past Type (Legacy)"
        description: "Legacy past tense classification"
        valuePath: past_type
        uiType: "select"
      
      - name: future_type
        displayName: "Future Type (Legacy)"
        description: "Legacy future tense classification"
        valuePath: future_type
        uiType: "select"
      
      # ===== MORPHOLOGICAL FEATURES =====
      - name: tense
        displayName: "Tense"
        description: "Tense (from spaCy morph)"
        valuePath: tense
        uiType: "select"
      
      - name: mood
        displayName: "Mood"
        description: "Mood (from spaCy morph)"
        valuePath: mood
        uiType: "select"
      
      - name: person
        displayName: "Person"
        description: "Grammatical person (from spaCy morph)"
        valuePath: person
        uiType: "select"
      
      - name: number
        displayName: "Number"
        description: "Grammatical number (from spaCy morph)"
        valuePath: number
        uiType: "select"
      
      - name: aspect
        displayName: "Aspect"
        description: "Grammatical aspect (from spaCy morph)"
        valuePath: aspect
        uiType: "select"
      
      # ===== IDENTIFIERS & TIMING =====
      - name: tokid
        displayName: "Token ID"
        description: "Unique token identifier for linking to app"
        valuePath: tokid
        uiType: "text"
      
      - name: start_ms
        displayName: "Start Time (ms)"
        description: "Start time in milliseconds"
        valuePath: start_ms
        uiType: "numeric"
      
      - name: end_ms
        displayName: "End Time (ms)"
        description: "End time in milliseconds"
        valuePath: end_ms
        uiType: "numeric"
      
      # ===== STRUCTURAL IDs =====
      - name: sentence_id
        displayName: "Sentence ID"
        description: "Sentence identifier for grouping"
        valuePath: sentence_id
        uiType: "text"
      
      - name: utterance_id
        displayName: "Utterance ID"
        description: "Utterance identifier for grouping"
        valuePath: utterance_id
        uiType: "text"
      
      # ===== SPEAKER =====
      - name: speaker_code
        displayName: "Speaker Code"
        description: "Standardized speaker code (e.g. lib-pm, lec-pf)"
        valuePath: speaker_code
        uiType: "select"

# ===== METADATA FIELDS =====
# These are imported from docmeta.jsonl via blacklab-server.yaml
metadata:
  fields:
    - name: file_id
      displayName: "File ID"
      description: "Unique file identifier"
      type: "text"
      valuePath: "@doc"
    
    - name: country_code
      displayName: "Country"
      description: "ISO country code"
      type: "text"
      valuePath: "@country_code"
    
    - name: date
      displayName: "Recording Date"
      description: "Date of recording (YYYY-MM-DD)"
      type: "text"
      valuePath: "@date"
    
    - name: radio
      displayName: "Radio Station"
      description: "Radio station name"
      type: "text"
      valuePath: "@radio"
    
    - name: city
      displayName: "City"
      description: "Recording city"
      type: "text"
      valuePath: "@city"
    
    - name: audio_path
      displayName: "Audio File"
      description: "Path to MP3 file"
      type: "text"
      valuePath: "@audio_path"
