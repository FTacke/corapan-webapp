# BlackLab Format Configuration for CO.RA.PAN Corpus
# Supports TSV and WPL formats (select via fileType)
# Version: 2.0 (CO.RA.PAN JSON v2 Schema)

fileType: tabular
fileTypeOptions:
  type: tsv
  columnNames: true
  # For WPL, switch to:
  # type: xml
  # topLevelElement: doc

annotatedFields:
  contents:
    displayName: "Annotated Contents"
    description: "Corpus text with linguistic annotations"

    # Main annotation layer
    annotations:
      - name: word
        displayName: "Word Form"
        description: "Original word form as transcribed"
        valuePath: word
        sensitivity: INSENSITIVE_DIACRITICS

      - name: norm
        displayName: "Normalized Form"
        description: "Normalized word form"
        valuePath: norm
        sensitivity: INSENSITIVE_DIACRITICS

      - name: lemma
        displayName: "Lemma"
        description: "Lemma / dictionary form"
        valuePath: lemma
        sensitivity: INSENSITIVE_DIACRITICS

      - name: pos
        displayName: "Part-of-Speech"
        description: "Universal POS tag"
        valuePath: pos

      - name: past_type
        displayName: "Past Tense Type"
        description: "Aspectual class (simple/perfect/habitual/etc.)"
        valuePath: past_type
        optional: true

      - name: future_type
        displayName: "Future Tense Type"
        description: "Future grammatical type"
        valuePath: future_type
        optional: true

      - name: tense
        displayName: "Tense"
        description: "Grammatical tense"
        valuePath: tense
        optional: true

      - name: mood
        displayName: "Mood"
        description: "Grammatical mood"
        valuePath: mood
        optional: true

      - name: person
        displayName: "Person"
        description: "Grammatical person (1/2/3)"
        valuePath: person
        optional: true

      - name: number
        displayName: "Number"
        description: "Grammatical number (singular/plural)"
        valuePath: number
        optional: true

      - name: aspect
        displayName: "Aspect"
        description: "Grammatical aspect"
        valuePath: aspect
        optional: true

      - name: tokid
        displayName: "Token ID"
        description: "Unique token identifier"
        valuePath: tokid

      - name: start_ms
        displayName: "Start Milliseconds"
        description: "Audio timestamp (start) in milliseconds"
        valuePath: start_ms
        type: numeric

      - name: end_ms
        displayName: "End Milliseconds"
        description: "Audio timestamp (end) in milliseconds"
        valuePath: end_ms
        type: numeric

      - name: sentence_id
        displayName: "Sentence ID"
        description: "Unique identifier for sentence/phrase"
        valuePath: sentence_id

      - name: utterance_id
        displayName: "Utterance ID"
        description: "Unique identifier for utterance/turn"
        valuePath: utterance_id

      - name: speaker_code
        displayName: "Speaker Code"
        description: "Speaker identifier (optional)"
        valuePath: speaker_code
        optional: true

# Metadata fields (for filtering/faceting)
metadata:
  namingScheme: "file_id"
  fields:
    - name: file_id
      displayName: "File ID"
      description: "Unique corpus file identifier"
      valuePath: "@doc"  # From doc attribute (docmeta.jsonl)
      type: tokenized

    - name: country_code
      displayName: "Country Code"
      description: "ISO 3-letter country code (ARG, MEX, etc.)"
      valuePath: "@country_code"
      type: classification
      uiType: select

    - name: date
      displayName: "Recording Date"
      description: "Date of recording (YYYY-MM-DD)"
      valuePath: "@date"
      type: range

    - name: radio
      displayName: "Radio Station"
      description: "Radio station name"
      valuePath: "@radio"
      type: tokenized
      uiType: select

    - name: city
      displayName: "City"
      description: "City where recording was made"
      valuePath: "@city"
      type: tokenized
      uiType: select

    - name: audio_path
      displayName: "Audio File"
      description: "Path to original audio file"
      valuePath: "@audio_path"
      type: text

# Inline tags for WPL format (ignored for TSV)
inlineTags:
  - path: ".//utt"
    displayName: "Utterance"
    sensitiveToDocumentScope: false

  - path: ".//s"
    displayName: "Sentence"
    sensitiveToDocumentScope: false

# Indexing parameters
indexing:
  indexed: true
  analyzer: "standard"
  defaultSort: file_id
