{% extends 'base.html' %}
{% from 'partials/page_navigation.html' import page_navigation %}
{% set page_name = 'corpus_metadata' %}
{% block page_title %}Metadatos · CO.RA.PAN{% endblock %}

{% block extra_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/md3/components/corpus-metadata.css') }}">
{% endblock %}

{% block content %}
<div class="md3-page" role="main" aria-label="Metadatos del corpus">
  <header class="md3-page__header">
    <div class="md3-hero md3-hero--card md3-hero__container">
      <div class="md3-hero__icon" aria-hidden="true"><span class="material-symbols-rounded">dataset</span></div>
      <div class="md3-hero__content">
        <p class="md3-body-small md3-hero__eyebrow">Corpus</p>
        <h1 class="md3-headline-medium md3-hero__title">Metadatos del corpus</h1>
        <p class="md3-body-medium md3-hero__intro">
          Esta página presenta los metadatos del corpus CO.RA.PAN por país y emisora. Seleccione un país para ver las grabaciones disponibles.
        </p>
      </div>
    </div>
  </header>

  <main class="md3-metadata-page">
    <div class="md3-metadata-content">
      <!-- Country Tabs -->
      <nav class="md3-metadata-tabs" role="tablist" aria-label="Selección de país" data-element="metadata-tabs">
        <!-- Tabs will be populated by JavaScript -->
      </nav>

      <!-- Tab Content Panels -->
      <div class="md3-metadata-panels" data-element="metadata-panels">
        <!-- Panels will be populated by JavaScript -->
      </div>

      <!-- Loading State -->
      <div class="md3-metadata-loading" data-element="metadata-loading">
        <div class="md3-metadata-loading__spinner"></div>
        <p class="md3-body-medium">Cargando metadatos...</p>
      </div>

      <!-- Error State -->
      <div class="md3-metadata-error" data-element="metadata-error" hidden>
        <span class="material-symbols-rounded">error</span>
        <p class="md3-body-medium">Error al cargar los metadatos. Por favor, recargue la página.</p>
      </div>
    </div>

    <!-- Metadata Schema Documentation -->
    <section class="md3-metadata-schema">
      <div class="md3-text-content">
        <h2 class="md3-title-large md3-section-title md3-text-heading">Estructura de metadatos</h2>
        
        <section class="md3-text-section md3-text-section--divider">
          <h3 class="md3-title-medium md3-text-heading">Metadatos del documento</h3>
          <p class="md3-body-large">
            Cada documento del corpus está asociado a un conjunto de metadatos que describen su origen y contexto de producción:
          </p>
          <ul class="md3-text-list md3-body-medium">
            <li><strong>País (country):</strong> Código ISO del país de origen de la emisora.</li>
            <li><strong>Emisora (station):</strong> Nombre de la emisora de radio.</li>
            <li><strong>Fecha de grabación (recording_date):</strong> Fecha aproximada de la grabación.</li>
            <li><strong>Género comunicativo (genre):</strong> Tipo de programa (noticias, entrevista, debate, etc.).</li>
            <li><strong>Duración (duration):</strong> Duración total del documento en segundos.</li>
          </ul>
        </section>

        <section class="md3-text-section md3-text-section--divider">
          <h3 class="md3-title-medium md3-text-heading">Metadatos del hablante</h3>
          <p class="md3-body-large">
            Cada segmento de habla está vinculado a un hablante caracterizado por los siguientes atributos:
          </p>
          <ul class="md3-text-list md3-body-medium">
            <li><strong>Rol profesional (speaker_role):</strong> Profesional (presentador, periodista, locutor) o no profesional (entrevistado, oyente).</li>
            <li><strong>Sexo (speaker_sex):</strong> Masculino (m) o femenino (f).</li>
            <li><strong>Modo de producción (production_mode):</strong> Habla leída, habla libre o presentación.</li>
            <li><strong>Identificador del hablante (speaker_id):</strong> Código único que permite rastrear al mismo hablante a través del corpus.</li>
          </ul>
        </section>

        <section class="md3-text-section">
          <h3 class="md3-title-medium md3-text-heading">Metadatos lingüísticos</h3>
          <p class="md3-body-large">
            Cada token (palabra) del corpus está anotado con información lingüística detallada:
          </p>
          <ul class="md3-text-list md3-body-medium">
            <li><strong>Forma (word):</strong> La forma ortográfica tal como aparece en la transcripción.</li>
            <li><strong>Lema (lemma):</strong> La forma canónica o de diccionario.</li>
            <li><strong>Categoría gramatical (pos):</strong> Etiqueta morfosintáctica según el sistema EAGLES/UPOS.</li>
            <li><strong>Marcas temporales (start_time, end_time):</strong> Posición exacta en el audio para sincronización.</li>
          </ul>
        </section>
      </div>
    </section>
  </main>
</div>

{{ page_navigation(prev_title="Guía", prev_url=url_for('corpus.guia'), next_title="Estadísticas", next_url=url_for('corpus.estadisticas')) }}
{% endblock %}

{% block extra_scripts %}
<script type="module" src="{{ url_for('static', filename='js/modules/corpus-metadata.js') }}"></script>
{% endblock %}
