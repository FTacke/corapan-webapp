<!-- Theme Toggle Component (MD3 Chip-Style) -->
<div class="theme-toggle-group" role="group" aria-label="Theme-Auswahl">
  <button type="button" 
          class="theme-chip" 
          data-theme-mode="auto"
          onclick="SiteTheme.set('auto')"
          aria-label="Automatisch (System)">
    <span class="material-symbols-outlined theme-chip__icon" aria-hidden="true">brightness_auto</span>
    <span class="theme-chip__label">Auto</span>
  </button>
  
  <button type="button" 
          class="theme-chip" 
          data-theme-mode="light"
          onclick="SiteTheme.set('light')"
          aria-label="Hell">
    <span class="material-symbols-outlined theme-chip__icon" aria-hidden="true">light_mode</span>
    <span class="theme-chip__label">Hell</span>
  </button>
  
  <button type="button" 
          class="theme-chip" 
          data-theme-mode="dark"
          onclick="SiteTheme.set('dark')"
          aria-label="Dunkel">
    <span class="material-symbols-outlined theme-chip__icon" aria-hidden="true">dark_mode</span>
    <span class="theme-chip__label">Dunkel</span>
  </button>
</div>

<style>
/* Theme Toggle Chips (MD3-konform) */
.theme-toggle-group {
  display: inline-flex;
  gap: var(--space-2, 8px);
  padding: var(--space-2, 8px);
}

.theme-chip {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1, 4px);
  padding: var(--space-2, 8px) var(--space-3, 12px);
  background: var(--md-sys-color-surface-container-low);
  color: var(--md-sys-color-on-surface-variant);
  border: 1px solid var(--md-sys-color-outline-variant);
  border-radius: var(--radius-sm, 8px);
  font-family: inherit;
  font-size: var(--md-sys-typescale-label-large, 0.875rem);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  user-select: none;
}

.theme-chip__icon {
  font-size: 18px;
  font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 20;
}

.theme-chip__label {
  line-height: 1;
}

/* Hover */
.theme-chip:hover {
  background: var(--md-sys-color-surface-container);
  border-color: var(--md-sys-color-outline);
}

/* Active State - entspricht gewähltem Modus */
.theme-chip[data-active="true"] {
  background: var(--md-sys-color-secondary-container);
  color: var(--md-sys-color-on-secondary-container);
  border-color: var(--md-sys-color-secondary);
}

.theme-chip[data-active="true"] .theme-chip__icon {
  font-variation-settings: 'FILL' 1, 'wght' 500, 'GRAD' 0, 'opsz' 20;
}

/* Focus */
.theme-chip:focus-visible {
  outline: 2px solid var(--md-sys-color-primary);
  outline-offset: 2px;
}

/* Compact variant für Footer/Header */
.theme-toggle-group--compact .theme-chip {
  padding: var(--space-1, 4px) var(--space-2, 8px);
  font-size: 0.8125rem;
}

.theme-toggle-group--compact .theme-chip__icon {
  font-size: 16px;
}

.theme-toggle-group--compact .theme-chip__label {
  display: none; /* Nur Icons im compact mode */
}

@media (min-width: 768px) {
  .theme-toggle-group--compact .theme-chip__label {
    display: inline; /* Labels auf Desktop wieder zeigen */
  }
}
</style>

<script>
// Sync active state with current theme
(function() {
  function updateActiveStates() {
    const currentMode = window.SiteTheme?.get() || 'auto';
    document.querySelectorAll('.theme-chip').forEach(chip => {
      const mode = chip.dataset.themeMode;
      chip.dataset.active = mode === currentMode ? 'true' : 'false';
    });
  }
  
  // Initial update
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', updateActiveStates);
  } else {
    updateActiveStates();
  }
  
  // Update on theme change
  const originalSet = window.SiteTheme?.set;
  if (originalSet) {
    window.SiteTheme.set = function(mode) {
      originalSet.call(window.SiteTheme, mode);
      updateActiveStates();
    };
  }
})();
</script>
