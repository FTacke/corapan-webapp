# Legacy: `static/img/statistics/` Directory

## Status: DEPRECATED & REMOVED FROM GIT

> **Last Updated:** January 17, 2026
> **Change:** Removed from Git tracking (was anti-pattern). Runtime-only deployment confirmed.

---

## What Was Here

The `static/img/statistics/` directory **once contained**:
- **30 PNG files** (~3.5 MB): Visualization charts generated by `LOKAL/_0_json/05_publish_corpus_statistics.py`
  - `viz_total_corpus.png`
  - `viz_genero_profesionales.png`
  - `viz_modo_genero_profesionales.png`
  - `viz_{COUNTRY}_resumen.png` (one per country)
- **1 JSON file**: `corpus_stats.json` (corpus statistics metadata)

These files were **committed to Git** (anti-pattern), but they are actually **generated artifacts**.

---

## Why It's Legacy

### ❌ Problems with Git-tracked generated assets:

1. **Binary bloat:** PNG files inflated repository size unnecessarily
2. **Stale data:** Assets in Git would lag behind actual runtime statistics
3. **Pipeline confusion:** Statistics are pipeline outputs, not source code
4. **Deployment mismatch:** Runtime serves from `PUBLIC_STATS_DIR`, not from `static/img/statistics`

### ✅ Current Architecture:

- **Generation:** `LOKAL/_0_json/05_publish_corpus_statistics.py` → generates files
- **Location:** `PUBLIC_STATS_DIR` environment variable (typically `{CORAPAN_RUNTIME_ROOT}/data/public/statistics/`)
- **Deployment:** Deploy via `LOKAL/_2_deploy/deploy_data.ps1`
- **Serving:** Flask app reads from `PUBLIC_STATS_DIR`, serves via `/corpus/api/statistics/<filename>`
- **Templates:** Use runtime-served files, not static files

---

## Migration Complete

### What Happened:

1. ✅ Removed all `static/img/statistics/*` files from Git index
2. ✅ Added `static/img/statistics/` to `.gitignore` (guardrail)
3. ✅ Verified no code references direct `static/img/statistics/` paths
4. ✅ Confirmed all serving goes through `PUBLIC_STATS_DIR` + API endpoints

### What Did NOT Change:

- Runtime statistics generation still works ✅
- Frontend displays statistics correctly ✅
- Deployment handles stats file upload ✅
- App configuration (PUBLIC_STATS_DIR) still in place ✅

---

## If You See `static/img/statistics/`

**On production runtime:** The directory exists and contains generated files.
- It is created at runtime if missing
- Files are overwritten by each statistics generation run
- It is **not** stored in Git

**In your local repo:** The directory may be empty or not exist.
- That's expected and correct
- When you run `05_publish_corpus_statistics.py` locally, it populates this directory
- This directory is **NOT** committed to Git (ignored via `.gitignore`)

---

## See Also

- [Runtime Statistics Deployment](./runtime_statistics_deploy.md)
- [Statistics Generation Pipeline](./statistics_generation.md)
- [LOKAL/_0_json/05_publish_corpus_statistics.py](../../LOKAL/_0_json/05_publish_corpus_statistics.py)
